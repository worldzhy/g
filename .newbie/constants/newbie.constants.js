const ENABLED_PATH = './.newbie/.enabled';
const ENABLED_MICROSERVICES = './.newbie/.enabled/microservices.json';

const FRAMEWORK_SETTINGS_JSON = './src/framework/framework.settings.json';
const MICROSERVICES_MODULE_TS = './src/microservices/microservices.module.ts';
const MICROSERVICES_CONFIG_TS = './src/microservices/microservices.config.ts';

const PRISMA_SCHEMA_PATH = './prisma/schema/microservices';
const PRISMA_SCHEMA_APPLICATION = './prisma/schema/application.prisma';

const ENV_PATH = './.env';
const GIT_MODULES = './.gitmodules';

const NEWBIE_DEVELOPER = 'NEWBIE_DEVELOPER';

const LINE =
  /(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\'|[^'])*'|\s*"(?:\"|[^"])*"|\s*`(?:\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;

const ALL_MICROSERVICES = {
  account: {
    key: 'account',
    srcPath: './src/microservices/account',
    schemaFileName: 'account.schema',
    settingsFileName: 'account.settings.json',
    moduleNames: 'AccountModule',
    importCode: `import {AccountModule} from './account/account.module';`,
    repo: 'https://github.com/worldzhy/newbie.account.git',
    repoPath: 'src/microservices/account',
  },
  'aws-s3': {
    key: 'aws-s3',
    srcPath: './src/microservices/aws-s3',
    schemaFileName: 'aws-s3.schema',
    settingsFileName: 'aws-s3.settings.json',
    moduleNames: 'AwsS3Module',
    importCode: `import {AwsS3Module} from './aws-s3/aws-s3.module';`,
    repo: 'https://github.com/worldzhy/newbie.aws-s3.git',
    repoPath: 'src/microservices/aws-s3',
  },
  'aws-sqs': {
    key: 'aws-sqs',
    srcPath: './src/microservices/aws-sqs',
    schemaFileName: null,
    settingsFileName: 'aws-sqs.settings.json',
    moduleNames: 'AwsSqsModule',
    importCode: `import {AwsSqsModule} from './aws-sqs/aws-sqs.module';`,
    repo: 'https://github.com/worldzhy/newbie.aws-sqs.git',
    repoPath: 'src/microservices/aws-sqs',
  },
  cache: {
    key: 'cache',
    srcPath: './src/microservices/cache',
    schemaFileName: null,
    settingsFileName: 'cache.settings.json',
    moduleNames: 'NewbieCacheModule',
    importCode: `import {NewbieCacheModule} from './cache/cache.module';`,
    repo: 'https://github.com/worldzhy/newbie.cache.git',
    repoPath: 'src/microservices/cache',
  },
  cloudformation: {
    key: 'cloudformation',
    srcPath: './src/microservices/cloudformation',
    schemaFileName: 'cloudformation.schema',
    settingsFileName: 'cloudformation.settings.json',
    moduleNames: 'AwsCloudformationModule',
    importCode: `import {AwsCloudformationModule} from './cloudformation/cloudformation.module';`,
    repo: 'https://github.com/worldzhy/newbie.cloudformation.git',
    repoPath: 'src/microservices/cloudformation',
  },
  cloudinary: {
    key: 'cloudinary',
    srcPath: './src/microservices/cloudinary',
    schemaFileName: null,
    settingsFileName: 'cloudinary.settings.json',
    moduleNames: 'CloudinaryModule',
    importCode: `import {CloudinaryModule} from './cloudinary/cloudinary.module';`,
    repo: 'https://github.com/worldzhy/newbie.cloudinary.git',
    repoPath: 'src/microservices/cloudinary',
  },
  elasticsearch: {
    key: 'elasticsearch',
    srcPath: './src/microservices/elasticsearch',
    schemaFileName: null,
    settingsFileName: 'elasticsearch.settings.json',
    moduleNames: 'ElasticsearchModule',
    importCode: `import {ElasticsearchModule} from './elasticsearch/elasticsearch.module';`,
    repo: 'https://github.com/worldzhy/newbie.elasticsearch.git',
    repoPath: 'src/microservices/elasticsearch',
  },
  'event-scheduling': {
    key: 'event-scheduling',
    srcPath: './src/microservices/event-scheduling',
    schemaFileName: 'event-scheduling.schema',
    settingsFileName: 'event-scheduling.settings.json',
    moduleNames: 'EventSchedulingModule',
    importCode: `import {EventSchedulingModule} from './event-scheduling/event-scheduling.module';`,
    repo: 'https://github.com/worldzhy/newbie.event-scheduling.git',
    repoPath: 'src/microservices/event-scheduling',
  },
  github: {
    key: 'github',
    srcPath: './src/microservices/github',
    schemaFileName: null,
    settingsFileName: 'github.settings.json',
    moduleNames: 'GitHubModule',
    importCode: `import {GitHubModule} from './github/github.module';`,
    repo: 'https://github.com/worldzhy/newbie.github.git',
    repoPath: 'src/microservices/github',
  },
  googleapis: {
    key: 'googleapis',
    srcPath: './src/microservices/googleapis',
    schemaFileName: null,
    settingsFileName: 'googleapis.settings.json',
    moduleNames: 'GoogleAPIsModule',
    importCode: `import {GoogleAPIsModule} from './googleapis/googleapis.module';`,
    repo: 'https://github.com/worldzhy/newbie.googleapis.git',
    repoPath: 'src/microservices/googleapis',
  },
  map: {
    key: 'map',
    srcPath: './src/microservices/map',
    schemaFileName: 'map.schema',
    settingsFileName: null,
    moduleNames: 'MapModule',
    importCode: `import {MapModule} from './map/map.module';`,
    repo: 'https://github.com/worldzhy/newbie.map.git',
    repoPath: 'src/microservices/map',
  },
  notification: {
    key: 'notification',
    srcPath: './src/microservices/notification',
    schemaFileName: 'notification.schema',
    settingsFileName: 'notification.settings.json',
    moduleNames: 'NotificationModule',
    importCode: `import {NotificationModule} from './notification/notification.module';`,
    repo: 'https://github.com/worldzhy/newbie.notification.git',
    repoPath: 'src/microservices/notification',
  },
  'order-mgmt': {
    key: 'order-mgmt',
    srcPath: './src/microservices/order-mgmt',
    schemaFileName: 'order-mgmt.schema',
    settingsFileName: 'order-mgmt.settings.json',
    moduleNames: 'OrderManagementModule',
    importCode: `import {OrderManagementModule} from './order-mgmt/order-mgmt.module';`,
    repo: 'https://github.com/worldzhy/newbie.order-mgmt.git',
    repoPath: 'src/microservices/order-mgmt',
  },
  pdf: {
    key: 'pdf',
    srcPath: './src/microservices/pdf',
    schemaFileName: null,
    settingsFileName: 'pdf.settings.json',
    moduleNames: 'PdfModule',
    importCode: `import {PdfModule} from './pdf/pdf.module';`,
    repo: 'https://github.com/worldzhy/newbie.pdf.git',
    repoPath: 'src/microservices/pdf',
  },
  'people-finder': {
    key: 'people-finder',
    srcPath: './src/microservices/people-finder',
    schemaFileName: 'people-finder.schema',
    settingsFileName: 'people-finder.settings.json',
    moduleNames: 'PeopleFinderModule',
    importCode: `import {PeopleFinderModule} from './people-finder/people-finder.module';`,
    repo: 'https://github.com/worldzhy/newbie.people-finder.git',
    repoPath: 'src/microservices/people-finder',
  },
  puppeteer: {
    key: 'puppeteer',
    srcPath: './src/microservices/puppeteer',
    schemaFileName: null,
    settingsFileName: 'puppeteer.settings.json',
    moduleNames: 'PuppeteerModule',
    importCode: `import {PuppeteerModule} from './puppeteer/puppeteer.module';`,
    repo: 'https://github.com/worldzhy/newbie.puppeteer.git',
    repoPath: 'src/microservices/puppeteer',
  },
  queue: {
    key: 'queue',
    srcPath: './src/microservices/queue',
    schemaFileName: 'queue.schema',
    settingsFileName: 'queue.settings.json',
    moduleNames: 'NewbieQueueModule',
    importCode: `import {NewbieQueueModule} from './queue/queue.module';`,
    repo: 'https://github.com/worldzhy/newbie.queue.git',
    repoPath: 'src/microservices/queue',
  },
  shortcut: {
    key: 'shortcut',
    srcPath: './src/microservices/shortcut',
    schemaFileName: 'shortcut.schema',
    settingsFileName: null,
    moduleNames: 'ShortcutModule',
    importCode: `import {ShortcutModule} from './shortcut/shortcut.module';`,
    repo: 'https://github.com/worldzhy/newbie.shortcut.git',
    repoPath: 'src/microservices/shortcut',
  },
  slack: {
    key: 'slack',
    srcPath: './src/microservices/slack',
    schemaFileName: null,
    settingsFileName: 'slack.settings.json',
    moduleNames: 'SlackModule',
    importCode: `import {SlackModule} from './slack/slack.module';`,
    repo: 'https://github.com/worldzhy/newbie.slack.git',
    repoPath: 'src/microservices/slack',
  },
  snowflake: {
    key: 'snowflake',
    srcPath: './src/microservices/snowflake',
    schemaFileName: null,
    settingsFileName: 'snowflake.settings.json',
    moduleNames: 'SnowflakeModule',
    importCode: `import {SnowflakeModule} from './snowflake/snowflake.module';`,
    repo: 'https://github.com/worldzhy/newbie.snowflake.git',
    repoPath: 'src/microservices/snowflake',
  },
  'stock-mgmt': {
    key: 'stock-mgmt',
    srcPath: './src/microservices/stock-mgmt',
    schemaFileName: 'stock-mgmt.schema',
    settingsFileName: null,
    moduleNames: 'StockManagementModule',
    importCode: `import {StockManagementModule} from './stock-mgmt/stock-mgmt.module';`,
    repo: 'https://github.com/worldzhy/newbie.stock-mgmt.git',
    repoPath: 'src/microservices/stock-mgmt',
  },
  storage: {
    key: 'storage',
    srcPath: './src/microservices/storage',
    schemaFileName: 'storage.schema',
    settingsFileName: 'storage.settings.json',
    moduleNames: 'StorageModule',
    importCode: `import {StorageModule} from './storage/storage.module';`,
    repo: 'https://github.com/worldzhy/newbie.storage.git',
    repoPath: 'src/microservices/storage',
  },
  tag: {
    key: 'tag',
    srcPath: './src/microservices/tag',
    schemaFileName: 'tag.schema',
    settingsFileName: null,
    moduleNames: 'TagModule',
    importCode: `import {TagModule} from './tag/tag.module';`,
    repo: 'https://github.com/worldzhy/newbie.tag.git',
    repoPath: 'src/microservices/tag',
  },
  'task-scheduling': {
    key: 'task-scheduling',
    srcPath: './src/microservices/task-scheduling',
    schemaFileName: 'task-scheduling.schema',
    settingsFileName: 'task-scheduling.settings.json',
    moduleNames: 'TaskSchedulingModule',
    importCode: `import {TaskSchedulingModule} from './task-scheduling/task-scheduling.module';`,
    repo: 'https://github.com/worldzhy/newbie.task-scheduling.git',
    repoPath: 'src/microservices/task-scheduling',
  },
  workflow: {
    key: 'workflow',
    srcPath: './src/microservices/workflow',
    schemaFileName: 'workflow.schema',
    settingsFileName: null,
    moduleNames: 'WorkflowModule',
    importCode: `import {WorkflowModule} from './workflow/workflow.module';`,
    repo: 'https://github.com/worldzhy/newbie.workflow.git',
    repoPath: 'src/microservices/workflow',
  },
  xlsx: {
    key: 'xlsx',
    srcPath: './src/microservices/xlsx',
    schemaFileName: null,
    settingsFileName: 'xlsx.settings.json',
    moduleNames: 'XLSXModule',
    importCode: `import {XLSXModule} from './xlsx/xlsx.module';`,
    repo: 'https://github.com/worldzhy/newbie.xlsx.git',
    repoPath: 'src/microservices/xlsx',
  },
};

module.exports = {
  ENABLED_PATH,
  ENABLED_MICROSERVICES,

  FRAMEWORK_SETTINGS_JSON,
  MICROSERVICES_MODULE_TS,
  MICROSERVICES_CONFIG_TS,

  PRISMA_SCHEMA_PATH,
  PRISMA_SCHEMA_APPLICATION,

  ENV_PATH,
  GIT_MODULES,

  LINE,
  ALL_MICROSERVICES,

  NEWBIE_DEVELOPER,
};
